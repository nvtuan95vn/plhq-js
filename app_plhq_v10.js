$(document).ready(function(){var urlpost=DOMAIN_API+idUser+'/'+idfile;$.post(urlpost,{"referrer":document.referrer.split("/").slice(0,3).join("/")||'nosite'},function(data){if(data){if(data.status==0){$('#loader-box').hide()
$('#msg-box').html(data.msg);$('#msg-box').css("visibility","visible");}else if(data.status==1){if(data.type==1){var dataall=arraytom3u8_type_1(data.v,data.tgdr,data.data,data.domaincdn);var pdtall=URL.createObjectURL(new Blob([dataall],{type:"application/x-mpegURL"}));loadPlayer(pdtall,data.configjwp);var meta=document.createElement('meta');meta.name="referrer";meta.content="no-referrer";document.getElementsByTagName('head')[0].appendChild(meta);}else if(data.type==100){var dataall=arraytom3u8_type_100(data.v,data.tgdr,data.data,data.domainrd);var pdtall=URL.createObjectURL(new Blob([dataall],{type:"application/x-mpegURL"}));loadPlayer(pdtall,data.configjwp);var meta=document.createElement('meta');meta.name="referrer";meta.content="no-referrer";document.getElementsByTagName('head')[0].appendChild(meta);}
else if(data.type==2){loadPlayer(data.data,data.configjwp);var meta=document.createElement('meta');meta.name="referrer";meta.content="no-referrer";document.getElementsByTagName('head')[0].appendChild(meta);}}}});$.get(DOMAIN_API_VIEW+idfile);});function arraytom3u8_type_1(v,tgdr,datar,domain_list_rd){var tv=["#EXTM3U"];var numdm_rd=domain_list_rd.length;tv.push("#EXT-X-VERSION:3");tv.push("#EXT-X-TARGETDURATION:"+tgdr);tv.push("#EXT-X-PLAYLIST-TYPE:VOD");for(var i=0;i<datar[0].length;i++){tv.push("#EXTINF:"+datar[0][i]+",");var domainchunk=domain_list_rd[i%numdm_rd];if(typeof(domainchunk)=='string'){if(domainchunk.indexOf('|')>0){tv.push(domainchunk.split('|')[0]+"/stream/v"+v+"/"+datar[1][i]+"."+domainchunk.split('|')[1]);}else{tv.push(domainchunk+"/stream/v"+v+"/"+datar[1][i]+".html");}}else if(typeof(domainchunk)=='object'){var laynguyen=(i-i%numdm_rd)/numdm_rd;var domainnew=domainchunk[laynguyen%domainchunk.length];if(domainnew.indexOf('|')>0){tv.push(domainnew.split('|')[0]+"/stream/v"+v+"/"+datar[1][i]+"."+domainnew.split('|')[1]);}else{tv.push(domainnew+"/stream/v"+v+"/"+datar[1][i]+".html");}}}
return tv.push("#EXT-X-ENDLIST"),tv.join("\n")}
function arraytom3u8_type_100(v,tgdr,datar,domain_rd){var tv=["#EXTM3U"];tv.push("#EXT-X-VERSION:3");tv.push("#EXT-X-TARGETDURATION:"+tgdr);tv.push("#EXT-X-PLAYLIST-TYPE:VOD");for(var i=0;i<datar[0].length;i++){tv.push("#EXTINF:"+datar[0][i]+",");var data_chunk=datar[1][i];var typechunk=data_chunk.split("|")[0];var datalink=data_chunk.split("|")[1];if(typechunk==1){tv.push(domain_rd+"/rdv1/"+datalink);}else if(typechunk==2){tv.push(datalink);}}
return tv.push("#EXT-X-ENDLIST"),tv.join("\n")}
function Storage(){var storage={type:"localStorage",setItem:function setItem(key,value){if(!window.localStorage||!window.sessionStorage){throw new Error("really old browser");}
try{localStorage.setItem(key,value);}catch(err){try{storage.type="sessionStorage";sessionStorage.setItem(key,value);}catch(sessErr){throw sessErr;}}},getItem:function getItem(key){return window[storage.type].getItem(key);}};return storage;}